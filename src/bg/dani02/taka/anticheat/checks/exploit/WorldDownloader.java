package bg.dani02.taka.anticheat.checks.exploit;

import org.apache.commons.lang3.StringUtils;
import org.bukkit.entity.Player;

import bg.dani02.taka.anticheat.ConfigsMessages;
import bg.dani02.taka.anticheat.Taka;
import bg.dani02.taka.anticheat.Utils;
import bg.dani02.taka.anticheat.enums.HackType;

public class WorldDownloader {
	public static void onCheck(Player player, String tag) {
		try {
			if(!Utils.checkModule(Utils.getCheatPlayer(player.getUniqueId()), HackType.EXPLOIT_WORLD_DOWNLOADER))
				return;
			
			if (StringUtils.containsIgnoreCase(tag, "WDL"))
				if (player.isOnline())
					Taka.getThisPlugin().getServer().getScheduler().runTask(Taka.getThisPlugin(),
							() -> Taka.getThisPlugin().getServer().dispatchCommand(
									Taka.getThisPlugin().getServer().getConsoleSender(),
									ConfigsMessages.world_downloader_cmd.replaceAll("%p%|%player%",
											player.getName())));
		} catch (NullPointerException ex) {
			ex.printStackTrace();
		}
	}
}